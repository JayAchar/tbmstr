---
title: "The importance of confounding"
output: 
  learnr::tutorial:
    progressive: true
runtime: shiny_prerendered
description: 'Understanding and handling confounding'
---

```{r setup, include = FALSE}
library(learnr)
library(gradethis)
library(dplyr)
knitr::opts_chunk$set(
  echo = FALSE
)
tutorial_options(
  exercise.completion = TRUE
)
```

## Confounding

Confounding is all about alternative explanations for an effect being seen. 

In this tutorial, we will use TB treatment outcome, sex and baseline smear microscopy 
status variables.

### Example data

> Add example data - show summary table after generating the data

### Crude association between sex and treatment outcome

Can you calculate the odds ratio for treatment success by sex?

> Add exercise with hint

### Effect of baseline smear status

To be considered a confounder, the baseline smear status needs to be associated
with the treatment outcome and sex. 

> Show table of outcome by sex stratified by smear status

Can you calculate the odds ratio between treatment outcome and baseline 
smear status?

> Add exercise with hint


Can you calculate the odds ratio between sex and baseline smear status?

> Add exercise with hint

> Quiz - how do you interpret the odds ratio between sex and smear
> Is baseline smear status a confounder?
> How can we account for baseline smear status when estimating the 
> association between sex and treatment outcome

### Controlling for confounding

There are mulitple methods of controlling for confounding in epidemiological
studies. 

```{r quiz-controlling}
wrong <- "No, this is a method that can be used when designing a study."
quiz(
  question(
    "Choose all methods to control for confounding in the analysis (multiple choices)",
    answer("Restriction", message = wrong),
    answer("Stratification", correct = TRUE),
    answer("Randomisation", message = wrong),
    answer("Regression modelling", correct = TRUE),
    answer("Matching", message = wrong)
  )
)
```



















